@use 'sass:math';

.banner-interstitial {
  $self: &;
  $break-2-col: 603px;
  $scale-max: 1600px;
  $scale-range: ($break-2-col $scale-max);
  $clamp-check: clamp(1px, 1vw, 2px);
  $begin-color-stop: var(--primary-blue), var(--primary-blue) math.percentage(math.div(211, 696)), var(--secondary-blue) math.percentage(math.div(211, 696));
  $gradient-angle-l: 105deg;

  @include mq(0 $break-2-col - 1px) {
    // Use a very small gradient for antialiasing.
    background-image: radial-gradient(circle at 115% 80%, var(--primary-yellow), var(--primary-yellow) 27.5%, transparent 27.6%, transparent), radial-gradient(circle at 54% 76%, var(--primary-red), var(--primary-red) 27.5%, transparent 27.6%, transparent), linear-gradient(65deg, var(--secondary-blue), var(--secondary-blue) 115px, var(--primary-blue) 115px, var(--primary-blue));
    overflow: hidden;

    // Add scaling to background '100' if supported.
    @supports (width: $clamp-check) {
      background-image: radial-gradient(circle at generateScaling((300px $break-2-col), (400px 660px)) generateScaling((300px $break-2-col), (480px 640px)), var(--primary-yellow), var(--primary-yellow) 30%, transparent 30.05%, transparent), radial-gradient(circle at generateScaling((300px $break-2-col), (168px 244px)) generateScaling((300px $break-2-col), (440px 700px)), var(--primary-red), var(--primary-red) 22.5%, transparent 22.55%, transparent), linear-gradient(65deg, var(--secondary-blue), var(--secondary-blue) 115px, var(--primary-blue) 115px, var(--primary-blue));
    }
  }

  &__inner {
    display: grid;
    position: relative;

    // The background '100' moves to the inner once the banner is no longer full bleed.
    @include mq($break-2-col) {
      background-image: radial-gradient(circle at 110% 40%, var(--primary-yellow), var(--primary-yellow) 22%, transparent 22.05%, transparent), radial-gradient(circle at 68% 85%, var(--primary-red), var(--primary-red) 26%, transparent 26.05%, transparent), linear-gradient($gradient-angle-l, $begin-color-stop, var(--secondary-blue) calc(math.percentage(math.div(211, 696)) + min(20%, 234px)), var(--primary-blue) calc(math.percentage(math.div(211, 696)) + min(20%, 234px)), var(--primary-blue));
      border-radius: 0.625rem;

      @supports (width: $clamp-check) {
        background-image: radial-gradient(circle at generateScaling(($break-2-col $scale-max), (550px 1525px)) generateScaling(($break-2-col $scale-max), (50px 140px)), var(--primary-yellow), var(--primary-yellow) 20%, transparent 20.05%, transparent), radial-gradient(circle at generateScaling(($break-2-col $scale-max), (400px 940px)) generateScaling(($break-2-col $scale-max), (170px 330px)), var(--primary-red), var(--primary-red) 30%, transparent 30.05%, transparent), linear-gradient($gradient-angle-l, $begin-color-stop, var(--secondary-blue) calc(math.percentage(math.div(211, 696)) + min(20%, 234px)), var(--primary-blue) calc(math.percentage(math.div(211, 696)) + min(20%, 234px)), var(--primary-blue));
      }
    }
  }

  &__content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(pxRem(268px), 1fr));
    position: relative;
  }

  &__text {
    $block-spacing-range: (24px 96px);

    padding-top: 3rem;
    z-index: 1;

    @include mq($break-2-col) {
      padding: 3.5rem 0 3.5rem 3rem;
      place-self: center flex-start;

      @supports (padding: $clamp-check) {
        padding: generateScaling($scale-range, $block-spacing-range) 0 generateScaling($scale-range, $block-spacing-range) generateScaling($scale-range, (40px 124px));
      }
    }
  }

  &__eyebrow,
  &__title,
  &__copy {
    color: var(--white);
  }

  &__copy {
    margin-top: 1.25rem;
    max-width: 42ch;
    min-width: 24ch;
    width: 38vw;

    #{$self}--no-cta & {
      margin-bottom: 6rem;
    }
  }

  &__cta {
    display: inline-flex;
    margin-top: 2.5rem;
  }

  &__image-wrapper {
    // Stretch image wrapper outside of the banner's wrapper.
    width: math.percentage(math.div(456px, 327px));

    @include mq($break-2-col) {
      left: 50%;
      position: absolute;
      width: 50%;

      @supports (width: $clamp-check) {
        transform: translate(generateScaling($scale-range, (-24px -166px)), generateScaling($scale-range, (28px -56px)));
        width: generateScaling($scale-range, (360px 840px));
      }

      @supports not (width: $clamp-check) {
        top: 50%;
        transform: translateY(-50%);
      }
    }
  }

  &__image {
    object-fit: cover;
  }
}
